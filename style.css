/* Pure CSS Kaleidoscope — 6 kites (12 slices), full circle */

:root {
  --k-size: 80vh;
  --spin-speed: 45s;
  --drift-speed: 25s;
  --image-url: url("image.png");
  --drift-radius-x: 35%;
  --drift-radius-y: 25%;
}

/* Register angle so the browser interpolates 0deg → 360deg for smooth circular motion */
@property --drift-angle {
  syntax: "<angle>";
  initial-value: 0deg;
  inherits: false;
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  padding: 0;
  height: 100%;
}

.viewport {
  width: 100%;
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #111;
}

.wheel {
  width: var(--k-size);
  height: var(--k-size);
  position: relative;
  flex-shrink: 0;
}

.wheel__inner {
  position: absolute;
  inset: 0;
  transform-origin: center center;
  will-change: transform;
  animation: spin var(--spin-speed) linear infinite;
}

/* Each slice is full wheel size, centered, then rotated so 12 wedges form a circle */
.slice {
  position: absolute;
  left: 50%;
  top: 50%;
  width: var(--k-size);
  height: var(--k-size);
  margin-left: calc(var(--k-size) / -2);
  margin-top: calc(var(--k-size) / -2);
  transform-origin: center center;
}

/* 6 wedge angles: 0°, 60°, 120°, 180°, 240°, 300° — each wedge has original + mirrored slice */
.wedge-0 {
  transform: rotate(0deg);
}
.wedge-1 {
  transform: rotate(60deg);
}
.wedge-2 {
  transform: rotate(120deg);
}
.wedge-3 {
  transform: rotate(180deg);
}
.wedge-4 {
  transform: rotate(240deg);
}
.wedge-5 {
  transform: rotate(300deg);
}

/* Background on pseudo-element so mirror only flips image, not clip-path */
.slice::before {
  content: "";
  position: absolute;
  inset: 0;
  --drift-angle: 0deg;
  background-image: var(--image-url);
  background-size: 200%;
  /* Ellipse: x = center + cos(θ)·rx, y = center + sin(θ)·ry */
  background-position:
    calc(50% + cos(var(--drift-angle)) * var(--drift-radius-x))
    calc(50% + sin(var(--drift-angle)) * var(--drift-radius-y));
  background-repeat: no-repeat;
  animation: drift var(--drift-speed) linear infinite;
}

@keyframes drift {
  to { --drift-angle: 360deg; }
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* 30° wedge from -30° to 0° (left half of kite, apex at center) */
.slice.original {
  clip-path: polygon(50% 50%, 93.3% 75%, 100% 50%);
}

/* 30° wedge from 0° to 30° (right half of kite); image mirrored along join */
.slice.mirrored {
  clip-path: polygon(50% 50%, 100% 50%, 93.3% 25%);
}

/* Reflect across the join (horizontal centerline): top wedge shows bottom wedge reflected */
.slice.mirrored::before {
  transform: scaleY(-1);
}
