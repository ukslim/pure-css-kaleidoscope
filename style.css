/* Pure CSS Kaleidoscope — 6 kites (12 slices), full circle */

:root {
  --k-size: 80vh;
  --spin-speed: 45s;
  --drift-speed: 25s;
  --image-url: url("image.png");
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  padding: 0;
  height: 100%;
}

.viewport {
  width: 100%;
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #111;
}

.wheel {
  width: var(--k-size);
  height: var(--k-size);
  position: relative;
  flex-shrink: 0;
}

.wheel__inner {
  position: absolute;
  inset: 0;
  transform-origin: center center;
  will-change: transform;
  animation: spin var(--spin-speed) linear infinite;
}

/* Each slice is full wheel size, centered, then rotated so 12 wedges form a circle */
.slice {
  position: absolute;
  left: 50%;
  top: 50%;
  width: var(--k-size);
  height: var(--k-size);
  margin-left: calc(var(--k-size) / -2);
  margin-top: calc(var(--k-size) / -2);
  transform-origin: center center;
}

/* 6 wedge angles: 0°, 60°, 120°, 180°, 240°, 300° — each wedge has original + mirrored slice */
.wedge-0 {
  transform: rotate(0deg);
}
.wedge-1 {
  transform: rotate(60deg);
}
.wedge-2 {
  transform: rotate(120deg);
}
.wedge-3 {
  transform: rotate(180deg);
}
.wedge-4 {
  transform: rotate(240deg);
}
.wedge-5 {
  transform: rotate(300deg);
}

/* Background on pseudo-element so mirror only flips image, not clip-path */
.slice::before {
  content: "";
  position: absolute;
  inset: 0;
  background-image: var(--image-url);
  background-size: 200%;
  background-position: 50% 50%;
  background-repeat: no-repeat;
  animation: drift var(--drift-speed) ease-in-out infinite;
}

@keyframes drift {
  0% {
    background-position: 50% 50%;
  }
  12.5% {
    background-position: 75% 35%;
  }
  25% {
    background-position: 85% 50%;
  }
  37.5% {
    background-position: 75% 65%;
  }
  50% {
    background-position: 50% 75%;
  }
  62.5% {
    background-position: 25% 65%;
  }
  75% {
    background-position: 15% 50%;
  }
  87.5% {
    background-position: 25% 35%;
  }
  100% {
    background-position: 50% 50%;
  }
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

/* 30° wedge from -30° to 0° (left half of kite, apex at center) */
.slice.original {
  clip-path: polygon(50% 50%, 93.3% 75%, 100% 50%);
}

/* 30° wedge from 0° to 30° (right half of kite); image mirrored along join */
.slice.mirrored {
  clip-path: polygon(50% 50%, 100% 50%, 93.3% 25%);
}

/* Reflect across the join (horizontal centerline): top wedge shows bottom wedge reflected */
.slice.mirrored::before {
  transform: scaleY(-1);
}
